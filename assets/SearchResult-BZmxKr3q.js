import{u as U,g as se,h as te,i as _,j as le,P as oe,t as ae,k as ne,l as P,m as R,n as re,w as $,p as t,q as ie,R as j,v as ue,x as ce,y as ye,C as me,z as pe,A as de,B as ge,D as he,E as ve,F as be,G as we,H as M,I as N,J as Ce,K as S,L as ke}from"./app-CjmkqvMb.js";const He=["/CHANGELOG.html","/CODE_OF_CONDUCT.html","/CONTRIBUTING.html","/LICENSE.html","/","/SUMMARY.html","/documentation.html","/testing.html","/backend/","/backend/graphql.html","/backend/neo4j-graphql-js.html","/backend/testing.html","/cypress/","/cypress/features.html","/deployment/TODO-next-update.html","/deployment/deployment-values.html","/neo4j/","/styleguide/","/webapp/","/webapp/components.html","/webapp/html.html","/webapp/scss.html","/webapp/testing.html","/webapp/vue.html","/deployment/styleguide/","/webapp/maintenance/","/backend/src/graphql/GraphQL-Playground.html","/webapp/components/Category/","/webapp/components/DateTime/","/webapp/components/Logo/demo.html","/styleguide/src/styleguide/docs/DataDisplay.html","/styleguide/src/styleguide/docs/DesignTokens.html","/styleguide/src/styleguide/docs/Introduction.html","/styleguide/src/styleguide/docs/Layout.html","/styleguide/src/styleguide/docs/Navigation.html","/styleguide/src/styleguide/docs/Typography.html","/webapp/static/img/mapbox/marker-icons/","/styleguide/src/system/components/data-display/Avatar/demo.html","/styleguide/src/system/components/data-display/CopyField/demo.html","/styleguide/src/system/components/data-display/List/demo.html","/styleguide/src/system/components/data-display/Number/demo.html","/styleguide/src/system/components/data-display/Table/demo.html","/styleguide/src/system/components/data-input/Form/demo.html","/styleguide/src/system/components/data-input/Input/demo.html","/styleguide/src/system/components/data-input/Radio/demo.html","/styleguide/src/system/components/data-input/Select/demo.html","/styleguide/src/system/components/layout/Card/demo.html","/styleguide/src/system/components/layout/Container/demo.html","/styleguide/src/system/components/layout/Flex/demo.html","/styleguide/src/system/components/layout/Grid/demo.html","/styleguide/src/system/components/layout/Modal/demo.html","/styleguide/src/system/components/layout/Page/demo.html","/styleguide/src/system/components/layout/PageTitle/demo.html","/styleguide/src/system/components/layout/Placeholder/demo.html","/styleguide/src/system/components/layout/Section/demo.html","/styleguide/src/system/components/layout/Space/demo.html","/styleguide/src/system/components/layout/Spinner/demo.html","/styleguide/src/system/components/navigation/Button/demo.html","/styleguide/src/system/components/navigation/Menu/demo.html","/styleguide/src/system/components/typography/Chip/demo.html","/styleguide/src/system/components/typography/Code/demo.html","/styleguide/src/system/components/typography/Heading/demo.html","/styleguide/src/system/components/typography/Icon/demo.html","/styleguide/src/system/components/typography/Logo/demo.html","/styleguide/src/system/components/typography/Tag/demo.html","/styleguide/src/system/components/typography/Text/demo.html","/404.html","/deployment/","/backend/src/graphql/","/backend/src/","/webapp/components/","/webapp/components/Logo/","/styleguide/src/styleguide/docs/","/styleguide/src/styleguide/","/styleguide/src/","/webapp/static/img/mapbox/","/webapp/static/img/","/webapp/static/","/styleguide/src/system/components/data-display/Avatar/","/styleguide/src/system/components/data-display/","/styleguide/src/system/components/","/styleguide/src/system/","/styleguide/src/system/components/data-display/CopyField/","/styleguide/src/system/components/data-display/List/","/styleguide/src/system/components/data-display/Number/","/styleguide/src/system/components/data-display/Table/","/styleguide/src/system/components/data-input/Form/","/styleguide/src/system/components/data-input/","/styleguide/src/system/components/data-input/Input/","/styleguide/src/system/components/data-input/Radio/","/styleguide/src/system/components/data-input/Select/","/styleguide/src/system/components/layout/Card/","/styleguide/src/system/components/layout/","/styleguide/src/system/components/layout/Container/","/styleguide/src/system/components/layout/Flex/","/styleguide/src/system/components/layout/Grid/","/styleguide/src/system/components/layout/Modal/","/styleguide/src/system/components/layout/Page/","/styleguide/src/system/components/layout/PageTitle/","/styleguide/src/system/components/layout/Placeholder/","/styleguide/src/system/components/layout/Section/","/styleguide/src/system/components/layout/Space/","/styleguide/src/system/components/layout/Spinner/","/styleguide/src/system/components/navigation/Button/","/styleguide/src/system/components/navigation/","/styleguide/src/system/components/navigation/Menu/","/styleguide/src/system/components/typography/Chip/","/styleguide/src/system/components/typography/","/styleguide/src/system/components/typography/Code/","/styleguide/src/system/components/typography/Heading/","/styleguide/src/system/components/typography/Icon/","/styleguide/src/system/components/typography/Logo/","/styleguide/src/system/components/typography/Tag/","/styleguide/src/system/components/typography/Text/"],fe="SEARCH_PRO_QUERY_HISTORY",v=U(fe,[]),Re=()=>{const{queryHistoryCount:l}=S,o=l>0;return{enabled:o,queryHistory:v,addQueryHistory:a=>{o&&(v.value=Array.from(new Set([a,...v.value.slice(0,l-1)])))},removeQueryHistory:a=>{v.value=[...v.value.slice(0,a),...v.value.slice(a+1)]}}},I=l=>He[l.id]+("anchor"in l?`#${l.anchor}`:""),Se="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:G}=S,b=U(Se,[]),xe=()=>{const l=G>0;return{enabled:l,resultHistory:b,addResultHistory:o=>{if(l){const a={link:I(o),display:o.display};"header"in o&&(a.header=o.header),b.value=[a,...b.value.slice(0,G-1)]}},removeResultHistory:o=>{b.value=[...b.value.slice(0,o),...b.value.slice(o+1)]}}},Le=l=>{const o=me(),a=_(),x=pe(),r=P(0),k=R(()=>r.value>0),d=de([]);return ge(()=>{const{search:g,terminate:L}=he(),w=Ce(c=>{const C=c.join(" "),{searchFilter:T=p=>p,splitWord:q,suggestionsFilter:O,...h}=o.value;C?(r.value+=1,g(c.join(" "),a.value,h).then(p=>T(p,C,a.value,x.value)).then(p=>{r.value-=1,d.value=p}).catch(p=>{console.warn(p),r.value-=1,r.value||(d.value=[])})):d.value=[]},S.searchDelay-S.suggestDelay);$([l,a],([c])=>w(c),{immediate:!0}),ve(()=>{L()})}),{isSearching:k,results:d}};var qe=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:o}){const a=te(),x=_(),r=le(oe),{enabled:k,addQueryHistory:d,queryHistory:g,removeQueryHistory:L}=Re(),{enabled:w,resultHistory:c,addResultHistory:C,removeResultHistory:T}=xe(),q=k||w,O=ae(l,"queries"),{results:h,isSearching:p}=Le(O),n=ne({isQuery:!0,index:0}),y=P(0),m=P(0),A=R(()=>q&&(g.value.length>0||c.value.length>0)),Q=R(()=>h.value.length>0),D=R(()=>h.value[y.value]||null),B=()=>{const{isQuery:e,index:s}=n;s===0?(n.isQuery=!e,n.index=e?c.value.length-1:g.value.length-1):n.index=s-1},Y=()=>{const{isQuery:e,index:s}=n;s===(e?g.value.length-1:c.value.length-1)?(n.isQuery=!e,n.index=0):n.index=s+1},z=()=>{y.value=y.value>0?y.value-1:h.value.length-1,m.value=D.value.contents.length-1},J=()=>{y.value=y.value<h.value.length-1?y.value+1:0,m.value=0},K=()=>{m.value<D.value.contents.length-1?m.value+=1:J()},V=()=>{m.value>0?m.value-=1:z()},F=e=>e.map(s=>ke(s)?s:t(s[0],s[1])),W=e=>{if(e.type==="customField"){const s=be[e.index]||"$content",[i,f=""]=we(s)?s[x.value].split("$content"):s.split("$content");return e.display.map(u=>t("div",F([i,...u,f])))}return e.display.map(s=>t("div",F(s)))},H=()=>{y.value=0,m.value=0,o("updateQuery",""),o("close")},X=()=>k?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},r.value.queryHistory),g.value.map((e,s)=>t("div",{class:["search-pro-result-item",{active:n.isQuery&&n.index===s}],onClick:()=>{o("updateQuery",e)}},[t(M,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:N,onClick:i=>{i.preventDefault(),i.stopPropagation(),L(s)}})]))])):null,Z=()=>w?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},r.value.resultHistory),c.value.map((e,s)=>t(j,{to:e.link,class:["search-pro-result-item",{active:!n.isQuery&&n.index===s}],onClick:()=>{H()}},()=>[t(M,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(i=>F(i)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:N,onClick:i=>{i.preventDefault(),i.stopPropagation(),T(s)}})]))])):null;return re("keydown",e=>{if(l.isFocusing){if(Q.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const s=D.value.contents[m.value];d(l.queries.join(" ")),C(s),a.push(I(s)),H()}}else if(w){if(e.key==="ArrowUp")B();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:s}=n;n.isQuery?(o("updateQuery",g.value[s]),e.preventDefault()):(a.push(c.value[s].link),H())}}}}),$([y,m],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!Q.value:!A.value}],id:"search-pro-results"},l.queries.length?p.value?t(ie,{hint:r.value.searching}):Q.value?t("ul",{class:"search-pro-result-list"},h.value.map(({title:e,contents:s},i)=>{const f=y.value===i;return t("li",{class:["search-pro-result-list-item",{active:f}]},[t("div",{class:"search-pro-result-title"},e||r.value.defaultTitle),s.map((u,ee)=>{const E=f&&m.value===ee;return t(j,{to:I(u),class:["search-pro-result-item",{active:E,"aria-selected":E}],onClick:()=>{d(l.queries.join(" ")),C(u),H()}},()=>[u.type==="text"?null:t(u.type==="title"?ue:u.type==="heading"?ce:ye,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?t("div",{class:"content-header"},u.header):null,t("div",W(u))])])})])})):r.value.emptyResult:q?A.value?[X(),Z()]:r.value.emptyHistory:r.value.emptyResult)}});export{qe as default};
